@model BooksEditViewModel
@{
    ViewBag.Title = "Edit";
}

<h2>Edit Book</h2>

@using (Html.BeginForm("Save", "Books", FormMethod.Post, new { @class = "kts-form", id = "book-edit-form" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.ObjectId)

<div class="row">
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Title)
        @Html.TextBoxFor(model => model.Title, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Title)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Author)
        @Html.TextBoxFor(model => model.Author, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Author)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.CoverUrl)
        <input type="filepicker" data-fp-apikey="ATHnrxlhTO2mCdSOL7k5lz" data-fp-mimetypes="image/*" data-fp-container="modal" data-fp-services="COMPUTER,URL,WEBCAM" onchange="kts.editPage.saveImageUrl('#CoverUrl', '#CoverUrlImg', event.fpfile.url);">
        @Html.HiddenFor(model => model.CoverUrl)
        <img id="CoverUrlImg" @if(!string.IsNullOrEmpty(Model.CoverUrl)) { <text>src="@Model.CoverUrl" class="kts-cover-image"</text> } else { <text>class="kts-cover-image hidden"</text> } />
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Publisher)
        @Html.TextBoxFor(model => model.Publisher, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Publisher)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.PublisherLocation)
        @Html.TextBoxFor(model => model.PublisherLocation, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.PublisherLocation)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.PublishedDate)
        @Html.TextBoxFor(model => model.PublishedDate, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.PublishedDate)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Pages)
        @Html.TextBoxFor(model => model.Pages, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Pages)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Price)
        @Html.TextBoxFor(model => model.Price, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Price)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.PrintRun)
        @Html.TextBoxFor(model => model.PrintRun, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.PrintRun)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Permalink)
        @Html.TextBoxFor(model => model.Permalink, new { @class = "form-control", placeholder = "ex. the-book-title" })
        @Html.ValidationMessageFor(model => model.Permalink)
    </div>
    <div class="form-group col-md-6 col-sm-12">
        @Html.LabelFor(model => model.Genres)
        @Html.EditorFor(model => model.Genres, "GenresEditor")
    </div>
    <div class="form-group col-sm-12">
        @Html.LabelFor(model => model.Description)
        @(Html.Kendo().EditorFor(model => model.Description).Tools(tools => tools.ViewHtml()).Encode(false))
        @Html.ValidationMessageFor(model => model.Description)
    </div>
</div>
<h3>Sections</h3>
<div class="row">
    <div id="book-sections" class="col-sm-12">
        @Html.EditorFor(model => model, "BookSectionEditor")
    </div>
</div>
<button type="button" id="add-new-section" class="btn btn-default">Add New Section</button>
<button type="submit" class="btn btn-default">Save</button>
}


@section scripts {
<script type="text/javascript" src="//api.filestackapi.com/filestack.js"></script>
<script type="text/javascript">kts.editPage.intialize();</script>
}